<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch</title>
</head>
<body>
    <h3>Planetes d'Star Wars</h3>
    <ul id="planets"></ul>

    <h3>Pokemons de Kanto</h3>
    <ol id="pokemons"></ol>
    
    <script>
        var planets = document.querySelector("#planets")

        fetch("https://swapi.dev/api/planets")  // fa la petició
        .then(res => res.json())                // QUAN TE RESPOSTA la converteix a json
        .then(res => {                          // QUAN L'HA CONVERTIT executa la funció anònima

            var resultats = res.results         // resultats és un array d'objectes amb la info dels planetes

            for (planet of resultats) {         // recorrem l'array
                // escribim un element d'una llista amb el nom dels planetes
                planets.innerHTML += `<li>${planet.name} té un diàmetre de ${planet.diameter} km</li>`    
            }
        })
        
        // Codi equivalent al fetch amb funcions asíncrones (async/await)
        async function getPlanets() {
            var res = await fetch('https://swapi.dev/api/planets'); 
            res = await res.json();
            console.log(res);
        };

        // getPlanets();

        // ------------------------------------------------------


        var pokedex = document.querySelector("#pokemons")

        fetch("https://pokeapi.co/api/v2/pokedex/2") 
        .then(res => res.json())                
        .then(res => {                      

            var pokemons = res.pokemon_entries  // array amb la info dels pokemons

            for (pokemon of pokemons) {         
                pokedex.innerHTML += `<li>${pokemon.pokemon_species.name}</li>`    
            }
        })          
    </script>
</body>
</html>